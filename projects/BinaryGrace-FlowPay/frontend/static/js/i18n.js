// 国际化支持
window.i18n = {
    currentLanguage: 'zh',
    
    translations: {
        zh: {
            'connect_wallet': '连接钱包',
            'disconnect_wallet': '断开连接',
            'task_market': '任务市场',
            'publish_task': '发布任务',
            'ai_agent': 'AI Agent',
            'statistics': '统计信息',
            'refresh': '刷新',
            'view_details': '查看详情',
            'claim_task': '认领任务',
            'select_winner': '选择获胜者',
            'publish_new_task': '发布新任务',
            'task_title': '任务标题',
            'task_description': '任务描述',
            'task_type': '任务类型',
            'task_requirements': '任务要求',
            'reward_amount': '奖励金额 (ETH)',
            'deadline': '截止时间',
            'submission_link': '提交链接（可选）',
            'publish': '发布任务',
            'agent_status': 'Agent 状态',
            'not_started': '未启动',
            'running': '运行中',
            'stopped': '已停止',
            'start_agent': '启动 AI Agent',
            'stop_agent': '停止 AI Agent',
            'sync_work': '同步工作',
            'work_logs': '工作日志',
            'total_tasks': '总任务数',
            'active_workers': '活跃工作者',
            'completed_tasks': '已完成任务',
            'total_rewards': '总奖励',
            'confirm_payment': '确认支付',
            'cancel': '取消',
            'payment_info': '支付信息',
            'task_id': '任务ID',
            'executor': '执行者',
            'reward_amount': '奖励金额',
            'gas_settings': 'Gas 设置',
            'gas_limit': 'Gas Limit',
            'gas_price': 'Gas Price (Gwei)',
            'please_connect_wallet': '请先连接钱包',
            'task_published_successfully': '任务发布成功',
            'task_claimed_successfully': '任务认领成功',
            'winner_selected_successfully': '获胜者选择成功',
            'ai_agent_started': 'AI Agent 已启动',
            'ai_agent_stopped': 'AI Agent 已停止',
            'loading_tasks': '加载任务中...',
            'tasks_loaded': '任务加载完成',
            'no_available_tasks': '暂无可用任务',
            'processing_payment': '正在处理支付...',
            'sign_transaction': '请在 MetaMask 中签名交易',
            'transaction_submitted': '交易已提交，等待确认...',
            'transaction_successful': '交易成功',
            'transaction_failed': '交易失败',
            'network_error': '网络错误',
            'unknown_error': '未知错误'
        },
        en: {
            'connect_wallet': 'Connect Wallet',
            'disconnect_wallet': 'Disconnect',
            'task_market': 'Task Market',
            'publish_task': 'Publish Task',
            'ai_agent': 'AI Agent',
            'statistics': 'Statistics',
            'refresh': 'Refresh',
            'view_details': 'View Details',
            'claim_task': 'Claim Task',
            'select_winner': 'Select Winner',
            'publish_new_task': 'Publish New Task',
            'task_title': 'Task Title',
            'task_description': 'Task Description',
            'task_type': 'Task Type',
            'task_requirements': 'Task Requirements',
            'reward_amount': 'Reward Amount (ETH)',
            'deadline': 'Deadline',
            'submission_link': 'Submission Link (Optional)',
            'publish': 'Publish Task',
            'agent_status': 'Agent Status',
            'not_started': 'Not Started',
            'running': 'Running',
            'stopped': 'Stopped',
            'start_agent': 'Start AI Agent',
            'stop_agent': 'Stop AI Agent',
            'sync_work': 'Sync Work',
            'work_logs': 'Work Logs',
            'total_tasks': 'Total Tasks',
            'active_workers': 'Active Workers',
            'completed_tasks': 'Completed Tasks',
            'total_rewards': 'Total Rewards',
            'confirm_payment': 'Confirm Payment',
            'cancel': 'Cancel',
            'payment_info': 'Payment Info',
            'task_id': 'Task ID',
            'executor': 'Executor',
            'reward_amount': 'Reward Amount',
            'gas_settings': 'Gas Settings',
            'gas_limit': 'Gas Limit',
            'gas_price': 'Gas Price (Gwei)',
            'please_connect_wallet': 'Please connect wallet first',
            'task_published_successfully': 'Task published successfully',
            'task_claimed_successfully': 'Task claimed successfully',
            'winner_selected_successfully': 'Winner selected successfully',
            'ai_agent_started': 'AI Agent started',
            'ai_agent_stopped': 'AI Agent stopped',
            'loading_tasks': 'Loading tasks...',
            'tasks_loaded': 'Tasks loaded',
            'no_available_tasks': 'No available tasks',
            'processing_payment': 'Processing payment...',
            'sign_transaction': 'Please sign transaction in MetaMask',
            'transaction_submitted': 'Transaction submitted, waiting for confirmation...',
            'transaction_successful': 'Transaction successful',
            'transaction_failed': 'Transaction failed',
            'network_error': 'Network error',
            'unknown_error': 'Unknown error'
        }
    },
    
    t: function(key) {
        return this.translations[this.currentLanguage][key] || key;
    },
    
    setLanguage: function(lang) {
        this.currentLanguage = lang;
        this.updateUI();
    },
    
    updateUI: function() {
        // 更新界面文本
        const elements = document.querySelectorAll('[data-i18n]');
        elements.forEach(element => {
            const key = element.getAttribute('data-i18n');
            element.textContent = this.t(key);
        });
    }
};
